
let stateNames = {
    "Alabama"    :  {
        fips     : "01" ,
        rateOfNew: .25,
        survival : 77.2,
        creation : 4.14,
        counties : {
            
        }
    },
    "Alaska"     :  {
        fips     : "02",
        rateOfNew: ,
        survival : ,
        creation : ,
        counties : {
            
        }
    },
    "Arizona"    :  {
        fips     : "04",
        rateOfNew: ,
        survival : ,
        creation : ,
        counties : {
            
        }
    },
    "Arkansas"               :  {
        fips     : "05",
        rateOfNew: ,
        survival : ,
        creation : ,
        counties : {
            
        }
    },
    "California"             :{
        fips     : "06" ,
        rateOfNew: ,
        survival : ,
        creation : ,
        counties : {
            
        }
    }, 
    "Colorado"               :  {
        fips     : "08",
        rateOfNew: ,
        survival : ,
        creation : ,
        counties : {
            
        }
    },
    "Connecticut"            :  {
        fips     : "09",
        rateOfNew: ,
        survival : ,
        creation : ,
        counties : {
            
        }
    },
    "Delaware"               :  {
        fips     : "10",
        rateOfNew: ,
        survival : ,
        creation : ,
        counties : {
            
        }
    },
    "District of Columbia"   :  {
        fips     : "11",
        rateOfNew: ,
        survival : ,
        creation : ,
        counties : {
            
        }
    },
    "Florida"                :  {
        fips     : "12",
        rateOfNew: ,
        survival : ,
        creation : ,
        counties : {
            
        }
    },
    "Georgia"                :  {
        fips     : "13",
        rateOfNew: ,
        survival : ,
        creation : ,
        counties : {
            
        }
    },
    "Hawaii"                 :  {
        fips     : "15",
        rateOfNew: ,
        survival : ,
        creation : ,
        counties : {
            
        }
    },
    "Idaho"                  :  {
        fips     : "16" ,
        rateOfNew: ,
        survival : ,
        creation : ,
        counties : {
            
        }
    },
    "Illinois"               : {
        fips     : "17",
        rateOfNew: ,
        survival : ,
        creation : ,
        counties : {
            
        }
    },
    "Indiana"                :  {
        fips     : "18" ,
        rateOfNew: ,
        survival : ,
        creation : ,
        counties : {
            
        }
    },
    "Iowa"                   :  {
        fips     : "19",
        rateOfNew: ,
        survival : ,
        creation : ,
        counties : {
            
        }
    },
    "Kansas"                 :  {
        fips     : "20",
        rateOfNew: ,
        survival : ,
        creation : ,
        counties : {
            
        }
    },
    "Kentucky"               :  {
        fips     : "21",
        rateOfNew: ,
        survival : ,
        creation : ,
        counties : {
            
        }
    },
    "Louisiana"              : {
        fips     : "22",
        rateOfNew: ,
        survival : ,
        creation : ,
        counties : {
            
        }
    },
    "Maine"                  : {
        fips     : "23",
        rateOfNew: ,
        survival : ,
        creation : ,
        counties : {
            
        }
    },
    "Maryland"               :  {
        fips     : "24",
        rateOfNew: ,
        survival : ,
        creation : ,
        counties : {
            
        }
    },
    "Massachusetts"          : {
        fips     : "25",
        rateOfNew: ,
        survival : ,
        creation : ,
        counties : {
            
        }
    },
    "Michigan"               : {
        fips     : "26",
        rateOfNew: ,
        survival : ,
        creation : ,
        counties : {
            
        }
    },
    "Minnesota"              : {
        fips     : "27",
        rateOfNew: ,
        survival : ,
        creation : ,
        counties : {
            
        }
    },
    "Mississippi"            :  {
        fips     : "28" ,
        rateOfNew: ,
        survival : ,
        creation : ,
        counties : {
            
        }
    },
    "Missouri"               : {
        fips     : "29",
        rateOfNew: ,
        survival : ,
        creation : ,
        counties : {
            
        }
    },
    "Montana"                : {
        fips     : "30",
        rateOfNew: ,
        survival : ,
        creation : ,
        counties : {
            
        }
    },
    "Nebraska"               : {
        fips     : "31",
        rateOfNew: ,
        survival : ,
        creation : ,
        counties : {
            
        }
    },
    "Nevada"                 : {
        fips     : "32",
        rateOfNew: ,
        survival : ,
        creation : ,
        counties : {
            
        }
    },
    "New Hampshire"          : {
        fips     : "33",
        rateOfNew: ,
        survival : ,
        creation : ,
        counties : {
            
        }
    },
    "New Jersey"             :  {
        fips     : "34",
        rateOfNew: ,
        survival : ,
        creation : ,
        counties : {
            
        }
    },
    "New Mexico"             : {
        fips     : "35",
        rateOfNew: ,
        survival : ,
        creation : ,
        counties : {
            
        }
    },
    "New York"               : {
        fips     : "36",
        rateOfNew: ,
        survival : ,
        creation : ,
        counties : {
            
        }
    },
    "North Carolina"         : {
        fips     : "37",
        rateOfNew: ,
        survival : ,
        creation : ,
        counties : {
            
        }
    },
    "North Dakota"           : {
        fips     : "38",
        rateOfNew: ,
        survival : ,
        creation : ,
        counties : {
            
        }
    },
    "Ohio"                   :  {
        fips     : "39",
        rateOfNew: ,
        survival : ,
        creation : ,
        counties : {
            
        }
    },
    "Oklahoma"               :  {
        fips     : "40",
        rateOfNew: ,
        survival : ,
        creation : ,
        counties : {
            
        }
    },
    "Oregon"                 : {
        fips     : "41",
        rateOfNew: ,
        survival : ,
        creation : ,
        counties : {
            
        }
    },
    "Pennsylvania"           : {
        fips     : "42",
        rateOfNew: ,
        survival : ,
        creation : ,
        counties : {
            
        }
    },
    "Rhode Island"           : {
        fips     : "44",
        rateOfNew: ,
        survival : ,
        creation : ,
        counties : {
            
        }
    },
    "South Carolina"         : {
        fips     : "45",
        rateOfNew: ,
        survival : ,
        creation : ,
        counties : {
            
        }
    },
    "South Dakota"           : {
        fips     : "46",
        rateOfNew: ,
        survival : ,
        creation : ,
        counties : {
            
        }
    },
    "Tennessee"              : {
        fips     : "47",
        rateOfNew: ,
        survival : ,
        creation : ,
        counties : {
            
        }
    },
    "Texas"                  :  {
        fips     : "48",
        rateOfNew: ,
        survival : ,
        creation : ,
        counties : {
            
        }
    },
    "Utah"                   :  {
        fips     : "49",
        rateOfNew: ,
        survival : ,
        creation : ,
        counties : {
            
        }
    },
    "Vermont"                : {
        fips     : "50",
        rateOfNew: ,
        survival : ,
        creation : ,
        counties : {
            
        }
    },
    "Virginia"               : {
        fips     : "51",
        rateOfNew: ,
        survival : ,
        creation : ,
        counties : {
            
        }
    },
    "Washington"             :  {
        fips     : "53",
        rateOfNew: ,
        survival : ,
        creation : ,
        counties : {
            
        }
    },
    "West Virginia"          : {
        fips     : "54",
        rateOfNew: ,
        survival : ,
        creation : ,
        counties : {
            
        }
    },
    "Wisconsin"              : {
        fips     : "55",
        rateOfNew: ,
        survival : ,
        creation : ,
        counties : {
            
        }
    },
    "Wyoming"                : {
        fips     : "56 ",
        rateOfNew: ,
        survival : ,
        creation : ,
        counties : {
            
        }
    },
};

var main = document.getElementById('stateDropDown');
var sub = document.getElementById('countyDropDown');

//Default option for dropdown 
main.length = 0;
let defaultOption = document.createElement('option');
defaultOption.text = 'Choose State';
main.add(defaultOption);
main.selectedIndex = 0;
sub.length = 0;
let defaultOption2 = document.createElement('option');
defaultOption2.text = 'Choose County';
sub.add(defaultOption2);
sub.selectedIndex = 0;

//Radio button toggle display
const stateRadioBtn = document.getElementById('stateRadio');
const countyRadioBtn = document.getElementById('countyRadio');
function toggler(){
    if(stateRadioBtn.checked) {
        document.getElementById('countyDiv').style.display='none';
    }
};
function toggler2(){
    if(countyRadioBtn.checked) {
        document.getElementById('countyDiv').style.display='block'
    }
}; 

var selectedOption
var inputOption
window.onload = function() {
    let option;
    const stateKeys = Object.keys(stateNames);
    for (let i = 0; i < stateKeys.length; i++) {
        option = document.createElement('option');
        option.text = stateKeys[i];
        option.value = stateKeys[i];
        main.add(option);
    }

    stateRadioBtn.addEventListener('click', toggler);
    countyRadioBtn.addEventListener('click', toggler2);

    main.addEventListener('change', function(event){
        selectedOption = event.target.value;
        inputOption = stateNames[selectedOption].fips;
        console.log(inputOption)
        console.log(statePop)
    });

    document.getElementById('submitBtn').addEventListener('click', fetchData)
};

    //State Population
let statePop = `http://api.census.gov/data/2019/pep/population?get=NAME,POP&for=state:${inputOption}`
    //County Population
let countyPop = 'https://api.census.gov/data/2019/pep/population?get=NAME,POP&for=county:*&in=state:*'
    //State Poverty
let statePov = 'https://api.census.gov/data/timeseries/poverty/saipe?get=SAEPOVRTALL_PT,NAME&for=state:*&time=2019'
    //County Poverty
let countyPov = 'https://api.census.gov/data/timeseries/poverty/saipe?get=SAEPOVALL_PT,GEOID,NAME&for=county:*&in=state:*&time=2019'
    //State Unemployment
let stateUnemp = 'https://api.bls.gov/publicAPI/v2/timeseries/data/LAUST130000000000003'
    //County Unemployment
let countyUnemp = 'http://api.census.gov/data/2019/pep/population?get=NAME,POP&for=state:*'

// Calling all of the API
var getStatePopulation = axios.get(statePop);
var getCountyPopulation = axios.get(countyPop);
var getStatePoverty = axios.get(statePov);
var getCountyPoverty = axios.get(countyPov);
var getStateUnemployment = axios.get(stateUnemp);
var getCountyUnemployment = axios.get(countyUnemp);

async function fetchData() {await axios.all([getStatePopulation, getCountyPopulation, getStatePoverty, getCountyPoverty, getStateUnemployment, getCountyUnemployment])
    .then(function (response) {
        const resultsStatePop = response[0].data;
        const resultsCountyPop = response[1].data
        showOutput(resultsStatePop, resultsCountyPop)
    })
};

 // Function to show the output
function showOutput(res1, res2) { 
    document.getElementById('results').innerHTML =
        `<li>${res1[1]}</li>`
        console.log(res1)
    }




