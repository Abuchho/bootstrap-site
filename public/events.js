
let stateNames = {
    "Alabama"    :  {
        fips     : "01" ,
        rateOfNew: .25,
        survival : 77.22,
        creation : 4.14,
        counties : {
            "Autauga"	: "001",  
            "Baldwin"	: "003",
            "Barbour"	: "005",
            "Bibb"	: "007",
            "Blount"	: "009",
            "Bullock"	: "011",
            "Butler"	: "013",
            "Calhoun"	: "015",
            "Chambers" : "017",
            "Cherokee"	: "019",
            "Chilton"	: "021",
            "Choctaw"	: "023",
            "Clarke"	: "025",
            "Clay"	: "027",
            "Cleburne"	: "029",
            "Coffee"	: "031",
            "Colbert"	: "033",
            "Conecuh"	: "035",
            "Coosa"	: "037",
            "Covington"	: "039",
            "Crenshaw"	: "041",
            "Cullman"	: "043",
            "Dale"	: "045",
            "Dallas"	: "047",
            "De Kalb"	: "049",
            "Elmore"	: "051",
            "Escambia"	: "053",
            "Etowah"	: "055",
            "Fayette"	: "057",
            "Franklin"	: "059",
            "Geneva"	: "061",
            "Greene"	: "063",
            "Hale"	: "065",
            "Henry"	: "067",
            "Houston"	: "069",
            "Jackson"	: "071",
            "Jefferson"	: "073",
            "Lamar"	: "075",
            "Lauderdale"	: "077",
            "Lawrence" : "079",
            "Lee"	: "081",
            "Limestone"	: "083",
            "Lowndes"	: "085",
            "Macon"	: "087",
            "Madison"	: "089",
            "Marengo"	: "091",
            "Marion"	: "093",
            "Marshall"	: "095",
            "Mobile"	: "097",
            "Monroe"	: "099",
            "Montgomery"	: "101",
            "Morgan"	: "103",
            "Perry"	: "105",
            "Pickens"	: "107",
            "Pike"	: "109",
            "Randolph"	: "111",
            "Russell"	: "113",
            "St Clair"	: "115",
            "Shelby"	: "117",
            "Sumter"	: "119",
            "Talladega"	: "121",
            "Tallapoosa"	: "123",
            "Tuscaloosa"	: "125",
            "Walker"	: "127",
            "Washington"	: "129",
            "Wilcox"	: "131",
            "Winston"	: "133"
        }
    },
    "Alaska"     :  {
        fips     : "02",
        rateOfNew: .48,
        survival : 79.09,
        creation : 3.74,
        counties : {
            "Aleutians East": "013",
	        "Aleutians West" : "016",
	        "Anchorage" : "020",
	        "Bethel" : "050",
	        "Bristol Bay" : "060",
	        "Denali" : "068",
	        "Dillingham" : "070",
	        "Fairbanks North Star" : "090",
	        "Haines" : "100",
	        "Juneau" : "110",
	        "Kenai Peninsula" : "122",
	        "Ketchikan Gateway" : "130",
	        "Kodiak Island" : "150",
	        "Lake and Peninsula" : "164",
	        "Matanuska-Susitna" : "170",
	        "Nome" : "180",
	        "North Slope" : "185",
	        "Northwest Arctic" : "188",
	        "Prince of Wales-Outer Ketchikan" : "201",
	        "Sitka" : "220",
	        "Skagway-Hoonah-Angoon" : "232",
	        "Southeast Fairbanks" : "240",
	        "Valdez-Cordova" : "261",
	        "Wade Hampton" : "270",
	        "Wrangell-Petersburg" : "280",
	        "Yakutat" : "282",
	        "Yukon-Koyukuk" : "290"
        }
    },
    "Arizona"    :  {
        fips     : "04",
        rateOfNew: .38,
        survival : 77.91,
        creation : 4.75,
        counties : {
            
        }
    },
    "Arkansas"               :  {
        fips     : "05",
        rateOfNew: .33,
        survival : 77.45,
        creation : 4.15,
        counties : {
            
        }
    },
    "California"             :{
        fips     : "06" ,
        rateOfNew: .43,
        survival : 81.83,
        creation : 6.43,
        counties : {
            
        }
    }, 
    "Colorado"               :  {
        fips     : "08",
        rateOfNew: .35,
        survival : 76.86,
        creation : 6.54,
        counties : {
            
        }
    },
    "Connecticut"            :  {
        fips     : "09",
        rateOfNew: .28,
        survival : 77.67,
        creation : 3.62,
        counties : {
            
        }
    },
    "Delaware"               :  {
        fips     : "10",
        rateOfNew: .27,
        survival : 76.21,
        creation : 6.28,
        counties : {
            
        }
    },
    "District of Columbia"   :  {
        fips     : "11",
        rateOfNew: 0,
        survival : 0,
        creation : 0,
        counties : {
            
        }
    },
    "Florida"                :  {
        fips     : "12",
        rateOfNew: .53,
        survival : 75.78,
        creation : 6.17,
        counties : {
            
        }
    },
    "Georgia"                :  {
        fips     : "13",
        rateOfNew: .36,
        survival : 76.49,
        creation : 5.38,
        counties : {
            
        }
    },
    "Hawaii"                 :  {
        fips     : "15",
        rateOfNew: .41,
        survival : 75.09,
        creation : 3.24,
        counties : {
            
        }
    },
    "Idaho"                  :  {
        fips     : "16" ,
        rateOfNew: .38,
        survival : 80.38,
        creation : 6.43,
        counties : {
            
        }
    },
    "Illinois"               : {
        fips     : "17",
        rateOfNew: .27,
        survival : 78.78,
        creation : 4.23,
        counties : {
            
        }
    },
    "Indiana"                :  {
        fips     : "18" ,
        rateOfNew: .25,
        survival : 77.95,
        creation : 3.50,
        counties : {
            
        }
    },
    "Iowa"                   :  {
        fips     : "19",
        rateOfNew: .31,
        survival : 79.82,
        creation : 3.45,
        counties : {
            
        }
    },
    "Kansas"                 :  {
        fips     : "20",
        rateOfNew: .30,
        survival : 74.84,
        creation : 3.99,
        counties : {
            
        }
    },
    "Kentucky"               :  {
        fips     : "21",
        rateOfNew: .27,
        survival : 79.09,
        creation : 3.71,
        counties : {
            
        }
    },
    "Louisiana"              : {
        fips     : "22",
        rateOfNew: .37,
        survival : 81.08,
        creation : 4.26,
        counties : {
            
        }
    },
    "Maine"                  : {
        fips     : "23",
        rateOfNew: .40,
        survival : 78.82,
        creation : 4.58,
        counties : {
            
        }
    },
    "Maryland"               :  {
        fips     : "24",
        rateOfNew: .26,
        survival : 76.65,
        creation : 4.01,
        counties : {
            
        }
    },
    "Massachusetts"          : {
        fips     : "25",
        rateOfNew: .27,
        survival : 80.53,
        creation : 5.13,
        counties : {
            
        }
    },
    "Michigan"               : {
        fips     : "26",
        rateOfNew: .29,
        survival : 71.79,
        creation : 4.16,
        counties : {
            
        }
    },
    "Minnesota"              : {
        fips     : "27",
        rateOfNew: .18,
        survival : 80.13,
        creation : 3.60,
        counties : {
            
        }
    },
    "Mississippi"            :  {
        fips     : "28" ,
        rateOfNew: .32,
        survival : 79.88,
        creation : 3.90,
        counties : {
            
        }
    },
    "Missouri"               : {
        fips     : "29",
        rateOfNew: .37,
        survival : 76.01,
        creation : 5.06,
        counties : {
            
        }
    },
    "Montana"                : {
        fips     : "30",
        rateOfNew: .35,
        survival : 80.96,
        creation : 5.57,
        counties : {
            
        }
    },
    "Nebraska"               : {
        fips     : "31",
        rateOfNew: .27,
        survival : 79.60,
        creation : 4.96,
        counties : {
            
        }
    },
    "Nevada"                 : {
        fips     : "32",
        rateOfNew: .32,
        survival : 77.79,
        creation : 5.48,
        counties : {
            
        }
    },
    "New Hampshire"          : {
        fips     : "33",
        rateOfNew: .31,
        survival : 76.82,
        creation : 3.70,
        counties : {
            
        }
    },
    "New Jersey"             :  {
        fips     : "34",
        rateOfNew: .36,
        survival : 79.58,
        creation : 6.69,
        counties : {
            
        }
    },
    "New Mexico"             : {
        fips     : "35",
        rateOfNew: .51,
        survival : 80.09,
        creation : 4.17,
        counties : {
            
        }
    },
    "New York"               : {
        fips     : "36",
        rateOfNew: .39,
        survival : 77.03,
        creation : 5.30,
        counties : {
            
        }
    },
    "North Carolina"         : {
        fips     : "37",
        rateOfNew: .31,
        survival : 78.18,
        creation : 4.89,
        counties : {
            
        }
    },
    "North Dakota"           : {
        fips     : "38",
        rateOfNew: .32,
        survival : 78.69,
        creation : 4.53,
        counties : {
            
        }
    },
    "Ohio"                   :  {
        fips     : "39",
        rateOfNew: .25,
        survival : 79.05,
        creation : 3.80,
        counties : {
            
        }
    },
    "Oklahoma"               :  {
        fips     : "40",
        rateOfNew: .44,
        survival : 78.93,
        creation : 5.63,
        counties : {
            
        }
    },
    "Oregon"                 : {
        fips     : "41",
        rateOfNew: .29,
        survival : 77.57,
        creation : 4.85,
        counties : {
            
        }
    },
    "Pennsylvania"           : {
        fips     : "42",
        rateOfNew: .18,
        survival : 79.05,
        creation : 3.71,
        counties : {
            
        }
    },
    "Rhode Island"           : {
        fips     : "44",
        rateOfNew: .16,
        survival : 75.75,
        creation : 3.74,
        counties : {
            
        }
    },
    "South Carolina"         : {
        fips     : "45",
        rateOfNew: .26,
        survival : 76.02,
        creation : 5.32,
        counties : {
            
        }
    },
    "South Dakota"           : {
        fips     : "46",
        rateOfNew: .29,
        survival : 77.28,
        creation : 4.23,
        counties : {
            
        }
    },
    "Tennessee"              : {
        fips     : "47",
        rateOfNew: .35,
        survival : 79.52,
        creation : 4.49,
        counties : {
            
        }
    },
    "Texas"                  :  {
        fips     : "48",
        rateOfNew: .38,
        survival : 79.63,
        creation : 5.60,
        counties : {
            
        }
    },
    "Utah"                   :  {
        fips     : "49",
        rateOfNew: .24,
        survival : 76.76,
        creation : 5.38,
        counties : {
            
        }
    },
    "Vermont"                : {
        fips     : "50",
        rateOfNew: .41,
        survival : 78.47,
        creation : 3.06,
        counties : {
            
        }
    },
    "Virginia"               : {
        fips     : "51",
        rateOfNew: .23,
        survival : 76.19,
        creation : 5.24,
        counties : {
            
        }
    },
    "Washington"             :  {
        fips     : "53",
        rateOfNew: .27,
        survival : 63.43,
        creation : 4.66,
        counties : {
            
        }
    },
    "West Virginia"          : {
        fips     : "54",
        rateOfNew: .16,
        survival : 77.37,
        creation : 2.93,
        counties : {
            
        }
    },
    "Wisconsin"              : {
        fips     : "55",
        rateOfNew: .22,
        survival : 78.89,
        creation : 3.57,
        counties : {
            
        }
    },
    "Wyoming"                : {
        fips     : "56 ",
        rateOfNew: .41,
        survival : 77.07,
        creation : 5.62,
        counties : {
            
        }
    },
};

var main = document.getElementById('stateDropDown');
var sub = document.getElementById('countyDropDown');

//Default option for dropdown 
main.length = 0;
let defaultOption = document.createElement('option');
defaultOption.text = 'Choose State';
main.add(defaultOption);
main.selectedIndex = 0;
sub.length = 0;
let defaultOption2 = document.createElement('option');
defaultOption2.text = 'Choose County';
sub.add(defaultOption2);
sub.selectedIndex = 0;

//Radio button toggle display
const stateRadioBtn = document.getElementById('stateRadio');
const countyRadioBtn = document.getElementById('countyRadio');
function toggler(){
    if(stateRadioBtn.checked) {
        document.getElementById('countyDiv').style.display='none';
    }
};
function toggler2(){
    if(countyRadioBtn.checked) {
        document.getElementById('countyDiv').style.display='block'
    }
}; 

var selectedOption
var inputOption
window.onload = function() {
    let option 
    const stateKeys = Object.keys(stateNames);
    for (let i = 0; i < stateKeys.length; i++) {
        option = document.createElement('option');
        option.text = stateKeys[i];
        option.value = stateKeys[i];
        main.add(option);
    }

    stateRadioBtn.addEventListener('click', toggler);
    countyRadioBtn.addEventListener('click', toggler2);

    main.addEventListener('change', function(event){
        selectedOption = event.target.value;
        inputOption = stateNames[selectedOption].fips;
        console.log(inputOption)
        console.log(statePop)

        let countyKeys = Object.keys(stateNames[selectedOption].counties)
        sub.addEventListener('click', function(e){
            for (let i = 0; i < countyKeys.length; i++) {
                option = document.createElement('option');
                option.text = countyKeys[i];
                option.value = countyKeys[i];
                sub.add(option);
                console.log(countyKeys)
            }
        })
    });

    document.getElementById('submitBtn').addEventListener('click', fetchData)
};

    //State Population
let statePop = `http://api.census.gov/data/2019/pep/population?get=NAME,POP&for=state:01`
    //County Population
let countyPop = 'https://api.census.gov/data/2019/pep/population?get=NAME,POP&for=county:033&in=state:01'
    //State Poverty
let statePov = 'https://api.census.gov/data/timeseries/poverty/saipe?get=SAEPOVRTALL_PT,NAME&for=state:01&time=2019'
    //County Poverty
let countyPov = 'https://api.census.gov/data/timeseries/poverty/saipe?get=SAEPOVALL_PT,GEOID,NAME&for=county:033&in=state:01&time=2019'
    //State Unemployment
let stateUnemp = 'https://api.bls.gov/publicAPI/v2/timeseries/data/LAUST130000000000003'
    //County Unemployment
let countyUnemp = 'http://api.census.gov/data/2019/pep/population?get=NAME,POP&for=state:*'

// Calling all of the API
var getStatePopulation = axios.get(statePop);
var getCountyPopulation = axios.get(countyPop);
var getStatePoverty = axios.get(statePov);
var getCountyPoverty = axios.get(countyPov);
var getStateUnemployment = axios.get(stateUnemp);
var getCountyUnemployment = axios.get(countyUnemp);

async function fetchData() {await axios.all([getStatePopulation, getCountyPopulation, getStatePoverty, getCountyPoverty, getStateUnemployment, getCountyUnemployment])
    .then(function (response) {
        const resultsStatePop = response[0].data;
        const resultsCountyPop = response[1].data
        showOutput(resultsStatePop, resultsCountyPop)
    })
};

 // Function to show the output
function showOutput(res1, res2, res3, res4, res5, res6) { 
    document.getElementById('results').innerHTML =
        `<li>${res1[1]}</li>`
        console.log(res1)
    }
	





